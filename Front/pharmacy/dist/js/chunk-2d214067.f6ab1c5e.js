(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d214067"],{aed1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container mt-4"},[a("h5",{staticClass:"h5 float-left text-left"},[e._v("Rezervisani lekovi")]),a("ReserveDrugModal",{staticClass:"float-right mt-n2 mb-3"}),a("b-table",{ref:"drug",attrs:{striped:"",hover:"",items:e.items,fields:e.fields},scopedSlots:e._u([{key:"cell(akcije)",fn:function(t){return["ACTION_NONE"!=t.item.action?a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){return e.cancel(t)}}},[a("b-icon-x"),e._v(" Otkaži rezervaciju ")],1):e._e()]}}])})],1)},s=[],i=(a("4160"),a("a434"),a("d3b7"),a("159b"),{data:function(){return{items:[],fields:["lek","apoteka","rok za preuzimanje","status","akcije"]}},methods:{cancel:function(e){var t=this;this.$http.get("reservation/cancel/"+e.item.id).then((function(a){200==a.status&&(t.toast("Uspešno ste otkazali rezervaciju leka!","Uspešno","success"),t.items.splice(e.index,1),t.$refs.drugs.refresh())})).catch((function(e){400==e.response.status?t.toast("Ne možete otkazati rezervaciju leka do čijeg roka za preuzimanje je ostalo manje od 24h!","Neuspešno","danger"):t.toast("Desila se greška! Molimo pokušajte kasnije","Neuspešno","danger")}))},toast:function(e,t,a){this.$bvToast.toast(e,{title:t,variant:a,autoHideDelay:7e3})}},mounted:function(){var e=this;this.$http.get("reservation/all").then((function(t){if(200==t.status){var a=[];t.data.forEach((function(e){a.push({lek:e.drugName,apoteka:e.pharmacyName,"rok za preuzimanje":new Date(e.deadline).toLocaleString(),status:"Canceled"==e.status?"Otkazano":"Rezervisano",_rowVariant:"Canceled"==e.status?"danger":"default",action:"Canceled"==e.status?"ACTION_NONE":"OK",id:e.id})})),e.items=a}})).catch((function(t){200!=t.response.status&&e.toast("Desila se greška! Molimo pokušajte kasnije","Neuspešno","danger")}))},components:{ReserveDrugModal:function(){return a.e("chunk-2d0e5612").then(a.bind(null,"93df"))}}}),o=i,r=a("2877"),u=Object(r["a"])(o,n,s,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d214067.f6ab1c5e.js.map