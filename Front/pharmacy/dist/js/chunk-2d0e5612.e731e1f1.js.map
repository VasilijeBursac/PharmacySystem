{"version":3,"sources":["webpack:///./src/views/patient/drugs/ReserveDrugModal.vue?d8c6","webpack:///src/views/patient/drugs/ReserveDrugModal.vue","webpack:///./src/views/patient/drugs/ReserveDrugModal.vue?37cf","webpack:///./src/views/patient/drugs/ReserveDrugModal.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","_v","options","model","callback","$$v","selected","staticClass","date","on","$event","searchDrug","items","fields","scopedSlots","_u","key","fn","row","busy","reserveDrug","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d0e5612.e731e1f1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal\",value:('my-modal'),expression:\"'my-modal'\"}],attrs:{\"variant\":\"success\"}},[_c('b-icon-heart',{attrs:{\"shift-h\":\"-3\"}}),_vm._v(\" Rezerviši lek \")],1),_c('b-modal',{attrs:{\"id\":\"my-modal\",\"size\":\"lg\",\"hide-footer\":\"\",\"title\":\"Rezervacija leka\"}},[_c('b-form',[_c('b-form-group',{attrs:{\"id\":\"drug-group\",\"label\":\"Lek:\",\"label-for\":\"drug-input\"}},[_c('b-form-select',{attrs:{\"options\":_vm.options},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}})],1),_c('b-form-group',{attrs:{\"id\":\"date-group\",\"label\":\"Rok za preuzimanje:\",\"label-for\":\"date-input\"}},[_c('b-form-datepicker',{staticClass:\"mb-2\",attrs:{\"id\":\"date-input\",\"placeholder\":\"Izaberite datum\"},model:{value:(_vm.date),callback:function ($$v) {_vm.date=$$v},expression:\"date\"}})],1),_c('b-button',{attrs:{\"block\":\"\",\"variant\":\"success\"},on:{\"click\":function($event){return _vm.searchDrug()}}},[_vm._v(\" Pretraži lek \")])],1),_c('h6',{staticClass:\"h6 my-3\"},[_vm._v(\"Izaberite apoteku\")]),_c('b-table',{staticClass:\"mt-3\",attrs:{\"striped\":\"\",\"hover\":\"\",\"items\":_vm.items,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(akcije)\",fn:function(row){return [_c('b-overlay',{staticClass:\"d-inline-block\",attrs:{\"show\":_vm.busy,\"rounded\":\"\",\"opacity\":\"0.6\",\"spinner-small\":\"\",\"spinner-variant\":\"primary\"}},[_c('b-button',{attrs:{\"block\":\"\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.reserveDrug(row)}}},[_vm._v(\" Rezerviši \")])],1)]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <b-button v-b-modal=\"'my-modal'\" variant=\"success\">\r\n            <b-icon-heart shift-h=\"-3\"></b-icon-heart>\r\n            Rezerviši lek\r\n        </b-button>\r\n\r\n        <b-modal id=\"my-modal\" size=\"lg\" hide-footer title=\"Rezervacija leka\">\r\n            <b-form>\r\n                <b-form-group id=\"drug-group\" label=\"Lek:\" label-for=\"drug-input\">\r\n                    <b-form-select v-model=\"selected\" :options=\"options\"></b-form-select>\r\n                </b-form-group>\r\n\r\n                <b-form-group id=\"date-group\" label=\"Rok za preuzimanje:\" label-for=\"date-input\">\r\n                    <b-form-datepicker id=\"date-input\" v-model=\"date\" placeholder=\"Izaberite datum\" class=\"mb-2\"></b-form-datepicker>\r\n                </b-form-group>\r\n\r\n                <b-button @click=\"searchDrug()\" block variant=\"success\">\r\n                    Pretraži lek\r\n                </b-button>\r\n            </b-form>\r\n\r\n            <h6 class=\"h6 my-3\">Izaberite apoteku</h6>\r\n            <b-table striped hover :items=\"items\" :fields=\"fields\" class=\"mt-3\">\r\n                <template #cell(akcije)=\"row\">\r\n                    <b-overlay\r\n                            :show=\"busy\"\r\n                            rounded\r\n                            opacity=\"0.6\"\r\n                            spinner-small\r\n                            spinner-variant=\"primary\"\r\n                            class=\"d-inline-block\">\r\n                            <b-button @click=\"reserveDrug(row)\" block size=\"sm\" >\r\n                                Rezerviši\r\n                            </b-button>\r\n                    </b-overlay>\r\n                </template>\r\n            </b-table>             \r\n        </b-modal>\r\n    </div>    \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return {\r\n            items: [],\r\n\t\t\tfields:['ime', 'grad', {key: 'ocena', sortable: true}, 'akcije'],\r\n\r\n            selected: null,\r\n            options: [],            \r\n            date: '',\r\n\r\n            busy: false\r\n        }\r\n    },\r\n    methods:{\r\n        searchDrug(){\r\n\r\n            if( this.selected == null || this.date == ''){\r\n                this.toast('Morate uneti i naziv leka i rok za preuzimanje kako bi pretražili lek!', 'Neuspešno', 'danger')\r\n                return;\r\n            }\r\n\r\n            if(new Date(this.date).getTime() < new Date().getTime()){\r\n                this.toast('Rok za preuzimanje ne može biti pre današnjeg dana!', 'Neuspešno', 'danger')\r\n                return;\r\n            }\r\n\r\n            this.$http\r\n                .get('reservation/search?drug=' + this.selected)\r\n                .then( res => {\r\n                    if(res.status == 200){\r\n                        let data = []\r\n                        res.data.forEach(element => {\r\n                            data.push({ \r\n                                ime: element.pharmacyName,\r\n                                grad: element.pharmacyCity,\r\n                                ocena: element.pharmacyRating != 0 ? element.pharmacyRating : 'Nema ocenu',\r\n                                id: element.drugInPharmacyId\r\n                            })\r\n                        });\r\n                        this.items = data\r\n                    }            \r\n                })\r\n                .catch( () => {\r\n                    this.toast('Desila se greška! Molimo pokušajte kasnije','Neuspešno', 'danger')  \r\n                })\r\n        },\r\n        reserveDrug(row){\r\n\r\n            this.busy = true\r\n\r\n            this.$http\r\n                .post('reservation/reserve', {\r\n                    'drugInPharmacyId': row.item.id,\r\n                    'deadline': new Date(this.date + ' 00:00').getTime()\r\n                })\r\n                .then( res => {\r\n                    if(res.status == 200){\r\n                        this.toast('Uspešno ste rezervisali lek!', 'Uspešno', 'success')\r\n                        this.closeModal();\r\n\r\n                        setTimeout( () => {\r\n                            this.$router.go(0)\r\n                        }, 250)\r\n                    }        \r\n                })\r\n                .catch( (error) => {\r\n                    if(error.response.status != 200)\r\n                        this.toast('Desila se greška! Molimo pokušajte kasnije','Neuspešno', 'danger')  \r\n                })\r\n        },\r\n        closeModal(){\r\n            this.$bvModal.hide('my-modal')\r\n            this.selected = null\r\n            this.date = ''\r\n            this.items = []\r\n            this.busy = false\r\n        },\r\n        toast(message, title, variant){\r\n            this.$bvToast.toast(message, {\r\n                title: title,\r\n                variant: variant,\r\n                autoHideDelay: 5000\r\n            })\r\n        }\r\n    },\r\n    mounted(){\r\n        this.$http\r\n            .get('drugs')\r\n            .then( (res) => {\r\n                console.log(res.data)\r\n                if(res.status == 200){\r\n                    this.options = []\r\n                    this.options.push({\r\n                            value: null,\r\n                            text: 'Izaberite lek'\r\n                        })\r\n                    res.data.forEach(drug => {\r\n                        this.options.push({\r\n                            value: drug.id,\r\n                            text: drug.name\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n    }\r\n}\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReserveDrugModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReserveDrugModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReserveDrugModal.vue?vue&type=template&id=2fc33322&\"\nimport script from \"./ReserveDrugModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ReserveDrugModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}