{"version":3,"sources":["webpack:///./src/views/patient/drugs/Drugs.vue?adbe","webpack:///src/views/patient/drugs/Drugs.vue","webpack:///./src/views/patient/drugs/Drugs.vue?e124","webpack:///./src/views/patient/drugs/Drugs.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","items","fields","scopedSlots","_u","key","fn","row","item","action","on","$event","cancel","_e","staticRenderFns","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,KAAK,CAACE,YAAY,2BAA2B,CAACN,EAAIO,GAAG,wBAAwBH,EAAG,mBAAmB,CAACE,YAAY,2BAA2BF,EAAG,UAAU,CAACI,IAAI,OAAOC,MAAM,CAAC,QAAU,GAAG,MAAQ,GAAG,MAAQT,EAAIU,MAAM,OAASV,EAAIW,QAAQC,YAAYZ,EAAIa,GAAG,CAAC,CAACC,IAAI,eAAeC,GAAG,SAASC,GAAK,MAAO,CAAqB,eAAnBA,EAAIC,KAAKC,OAAyBd,EAAG,WAAW,CAACK,MAAM,CAAC,KAAO,KAAK,QAAU,UAAUU,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAIqB,OAAOL,MAAQ,CAACZ,EAAG,YAAYJ,EAAIO,GAAG,yBAAyB,GAAGP,EAAIsB,aAAa,IACvoBC,EAAkB,GCkBtB,G,wCAAA,CACE,KADF,WAEI,MAAJ,CACM,MAAN,GACA,kEAGE,QAAF,CACI,OADJ,SACA,GAAM,IAAN,OACM,KAAN,MACA,qCACA,kBACA,gBACU,EAAV,oEACU,EAAV,wBACU,EAAV,0BAGA,mBACA,uBACU,EAAV,uHACA,+EAGI,MAjBJ,SAiBA,OACM,KAAN,kBACQ,MAAR,EACQ,QAAR,EACQ,cAAR,QAIE,QAhCF,WAgCI,IAAJ,OACI,KAAJ,MACA,uBACA,kBACM,GAAN,eACQ,IAAR,KACQ,EAAR,0BACU,EAAV,MACY,IAAZ,WACY,QAAZ,eACY,qBAAZ,sCACY,OAAZ,8CACY,YAAZ,wCACY,OAAZ,wCACY,GAAZ,UAGQ,EAAR,YAGA,mBACA,wBACA,+EAGE,WAAF,CACI,iBAAJ,WAAM,OAAN,oDC7E6W,I,YCOzWC,EAAY,eACd,EACAzB,EACAwB,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/chunk-2d214067.f6ab1c5e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container mt-4\"},[_c('h5',{staticClass:\"h5 float-left text-left\"},[_vm._v(\"Rezervisani lekovi\")]),_c('ReserveDrugModal',{staticClass:\"float-right mt-n2 mb-3\"}),_c('b-table',{ref:\"drug\",attrs:{\"striped\":\"\",\"hover\":\"\",\"items\":_vm.items,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(akcije)\",fn:function(row){return [(row.item.action != 'ACTION_NONE')?_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"danger\"},on:{\"click\":function($event){return _vm.cancel(row)}}},[_c('b-icon-x'),_vm._v(\" Otkaži rezervaciju \")],1):_vm._e()]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container mt-4\">\r\n        <h5 class=\"h5 float-left text-left\">Rezervisani lekovi</h5>\r\n\r\n        <ReserveDrugModal class=\"float-right mt-n2 mb-3\"/>\r\n\r\n        <b-table ref=\"drug\" striped hover :items=\"items\" :fields=\"fields\">\r\n            <template #cell(akcije)=\"row\">\r\n                <b-button v-if=\"row.item.action != 'ACTION_NONE'\" @click=\"cancel(row)\" size=\"sm\" variant=\"danger\" >\r\n                    <b-icon-x></b-icon-x>\r\n                    Otkaži rezervaciju\r\n                </b-button>\r\n            </template>\r\n        </b-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    data(){\r\n        return {\r\n            items: [],\r\n\t\t\tfields:['lek', 'apoteka', 'rok za preuzimanje', 'status', 'akcije'],\r\n        }\r\n    },\r\n    methods:{\r\n        cancel(row){\r\n            this.$http\r\n                .get('reservation/cancel/' + row.item.id)\r\n                .then( res => {\r\n                    if(res.status == 200){\r\n                        this.toast('Uspešno ste otkazali rezervaciju leka!', 'Uspešno', 'success')\r\n                        this.items.splice(row.index, 1)\r\n                        this.$refs.drugs.refresh()\r\n                    }\r\n                })\r\n                .catch( (error) => {\r\n                    if(error.response.status == 400){\r\n                        this.toast('Ne možete otkazati rezervaciju leka do čijeg roka za preuzimanje je ostalo manje od 24h!', 'Neuspešno', 'danger')\r\n                    }else this.toast('Desila se greška! Molimo pokušajte kasnije','Neuspešno', 'danger')  \r\n                })\r\n        },\r\n        toast(message, title, variant){\r\n            this.$bvToast.toast(message, {\r\n                title: title,\r\n                variant: variant,\r\n                autoHideDelay: 7000\r\n            })\r\n        }\r\n    },\r\n    mounted(){\r\n        this.$http\r\n            .get('reservation/all')\r\n            .then( res => {\r\n                if(res.status == 200){\r\n                    let data = []\r\n                        res.data.forEach(element => {\r\n                            data.push({ \r\n                                'lek': element.drugName,\r\n                                'apoteka': element.pharmacyName,\r\n                                'rok za preuzimanje': new Date(element.deadline).toLocaleString(),\r\n                                'status': element.status == 'Canceled' ? 'Otkazano' : 'Rezervisano',\r\n                                '_rowVariant': element.status == 'Canceled' ? 'danger' : 'default',\r\n                                'action': element.status == 'Canceled' ? 'ACTION_NONE' : 'OK',\r\n                                'id': element.id\r\n                            })\r\n                        });\r\n                        this.items = data\r\n                }        \r\n            })\r\n            .catch( (error) => {\r\n                if(error.response.status != 200)\r\n                    this.toast('Desila se greška! Molimo pokušajte kasnije','Neuspešno', 'danger')  \r\n            })\r\n    },\r\n    components:{\r\n        ReserveDrugModal: () => import('./ReserveDrugModal.vue')\r\n    }\r\n}\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Drugs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Drugs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Drugs.vue?vue&type=template&id=cc33aec6&\"\nimport script from \"./Drugs.vue?vue&type=script&lang=js&\"\nexport * from \"./Drugs.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}