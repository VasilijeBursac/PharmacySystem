(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e5612"],{"93df":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"my-modal",expression:"'my-modal'"}],attrs:{variant:"success"}},[a("b-icon-heart",{attrs:{"shift-h":"-3"}}),e._v(" Rezerviši lek ")],1),a("b-modal",{attrs:{id:"my-modal",size:"lg","hide-footer":"",title:"Rezervacija leka"}},[a("b-form",[a("b-form-group",{attrs:{id:"drug-group",label:"Lek:","label-for":"drug-input"}},[a("b-form-select",{attrs:{options:e.options},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),a("b-form-group",{attrs:{id:"date-group",label:"Rok za preuzimanje:","label-for":"date-input"}},[a("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"date-input",placeholder:"Izaberite datum"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),a("b-button",{attrs:{block:"",variant:"success"},on:{click:function(t){return e.searchDrug()}}},[e._v(" Pretraži lek ")])],1),a("h6",{staticClass:"h6 my-3"},[e._v("Izaberite apoteku")]),a("b-table",{staticClass:"mt-3",attrs:{striped:"",hover:"",items:e.items,fields:e.fields},scopedSlots:e._u([{key:"cell(akcije)",fn:function(t){return[a("b-overlay",{staticClass:"d-inline-block",attrs:{show:e.busy,rounded:"",opacity:"0.6","spinner-small":"","spinner-variant":"primary"}},[a("b-button",{attrs:{block:"",size:"sm"},on:{click:function(a){return e.reserveDrug(t)}}},[e._v(" Rezerviši ")])],1)]}}])})],1)],1)},i=[],n=(a("4160"),a("b0c0"),a("159b"),{data:function(){return{items:[],fields:["ime","grad",{key:"ocena",sortable:!0},"akcije"],selected:null,options:[],date:"",busy:!1}},methods:{searchDrug:function(){var e=this;null!=this.selected&&""!=this.date?new Date(this.date).getTime()<(new Date).getTime()?this.toast("Rok za preuzimanje ne može biti pre današnjeg dana!","Neuspešno","danger"):this.$http.get("reservation/search?drug="+this.selected).then((function(t){if(200==t.status){var a=[];t.data.forEach((function(e){a.push({ime:e.pharmacyName,grad:e.pharmacyCity,ocena:0!=e.pharmacyRating?e.pharmacyRating:"Nema ocenu",id:e.drugInPharmacyId})})),e.items=a}})).catch((function(){e.toast("Desila se greška! Molimo pokušajte kasnije","Neuspešno","danger")})):this.toast("Morate uneti i naziv leka i rok za preuzimanje kako bi pretražili lek!","Neuspešno","danger")},reserveDrug:function(e){var t=this;this.busy=!0,this.$http.post("reservation/reserve",{drugInPharmacyId:e.item.id,deadline:new Date(this.date+" 00:00").getTime()}).then((function(e){200==e.status&&(t.toast("Uspešno ste rezervisali lek!","Uspešno","success"),t.closeModal(),setTimeout((function(){t.$router.go(0)}),250))})).catch((function(e){200!=e.response.status&&t.toast("Desila se greška! Molimo pokušajte kasnije","Neuspešno","danger")}))},closeModal:function(){this.$bvModal.hide("my-modal"),this.selected=null,this.date="",this.items=[],this.busy=!1},toast:function(e,t,a){this.$bvToast.toast(e,{title:t,variant:a,autoHideDelay:5e3})}},mounted:function(){var e=this;this.$http.get("drugs").then((function(t){console.log(t.data),200==t.status&&(e.options=[],e.options.push({value:null,text:"Izaberite lek"}),t.data.forEach((function(t){e.options.push({value:t.id,text:t.name})})))}))}}),o=n,r=a("2877"),l=Object(r["a"])(o,s,i,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0e5612.e731e1f1.js.map